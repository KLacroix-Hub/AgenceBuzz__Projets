!function(){var e=document.querySelectorAll(".m-filtres-pages");if(!e||!e.length)return;var a="",s=!1,c="",o=!1,l=!1,n=!1;const r=document.querySelector(".js-action"),i=document.querySelector(".js-all"),d=document.querySelector(".js-anchor"),u=document.querySelector(".js-clear");var m=0,v=[];const h=document.querySelector(".js-list-container");var p=new Splide(".js-flex-filtres",{type:"slide",drag:!1,arrows:!1,pagination:!1});p.on("moved",function(e){n=!1});const f=()=>{document.querySelectorAll(".js-select").forEach(e=>{e.addEventListener("change",()=>{n=!0,a=e.dataset.index,c=e.dataset.lareponse,(s="oui"!=e.dataset.hasquestion)&&(d.classList.remove("g-hidden"),r.classList.add("g-hidden")),o=e.dataset.pages,l=e.dataset.page})})};e=e=>{e.preventDefault(),p.go(0),setTimeout(()=>{for(let e=1;e<=m;e++)p.remove(e);setTimeout(()=>{p.remove(".is-next")},100),g("all",l),document.querySelectorAll(".js-select").forEach(e=>{e.checked=!1}),d.classList.add("g-hidden"),u.classList.add("g-hidden"),i.classList.remove("g-hidden"),r.classList.remove("g-hidden"),c=a="",o=s=!1,m=0,v=[]},200)};u.addEventListener("click",e),i.addEventListener("click",e);const g=(e,t,a=!1)=>{fetch(wami_js.siteurl+"/api/v1/pages",{method:"POST",body:JSON.stringify({pages:e,page:t,filtres:a}),headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>{var t;e.data.tpl&&(h.innerHTML=e.data.tpl),e.data.tpl_filtre&&((t=document.createElement("li")).classList.add("splide__slide"),t.innerHTML=e.data.tpl_filtre,p.add(t),p.go(">"),m+=1,f())})},L=(e,t)=>{m+=1,fetch(wami_js.siteurl+"/api/v1/pages/question",{method:"POST",body:JSON.stringify({index:e,page:t}),headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>{var t;e.data.tpl_list?((t=document.createElement("li")).classList.add("splide__slide"),t.innerHTML=e.data.tpl,p.add(t),p.go(">"),m+=1,f()):console.log("pas de tpl"),e.data.tpl_list&&(h.innerHTML=e.data.tpl_list)})};d.addEventListener("click",e=>{var t;n&&(v.push({index:a,lareponse:c}),s?((t=document.createElement("li")).classList.add("splide__slide"),t.innerHTML="",p.add(t),p.go(">"),m+=1,d.classList.remove("g-hidden"),u.classList.remove("g-hidden"),i.classList.add("g-hidden"),r.classList.add("g-hidden"),g(o,l,v)):(L(a,l),i.classList.add("g-hidden")))}),r.addEventListener("click",e=>{e.preventDefault(),n&&(v.push({index:a,lareponse:c}),s?((e=document.createElement("li")).classList.add("splide__slide"),e.innerHTML="",p.add(e),p.go(">"),m+=1,d.classList.remove("g-hidden"),u.classList.remove("g-hidden"),i.classList.add("g-hidden"),r.classList.add("g-hidden"),g(o,l,v)):(L(a,l),i.classList.add("g-hidden")))}),p.mount(),f()}(),function(){var e=document.querySelectorAll(".m-flex-accordeon");e&&e.length&&e.forEach((e,t)=>{const a=e.querySelectorAll(".js-item");a&&a.forEach((t,e)=>{t.querySelector(".js-action").addEventListener("click",e=>{t.classList.contains("active")?t.classList.remove("active"):(a.forEach((e,t)=>{e.classList.remove("active")}),t.classList.add("active"))})})})}(),function(){var e=document.querySelectorAll(".m-flex-carrousel");e&&e.length&&new Splide(".js-flex-carrousel",{type:"loop",padding:"5rem",gap:"1.25rem",arrows:!1,breakpoints:{576:{paginaion:!1,perPage:1,padding:"50px"}}}).mount()}(),function(){var e=document.querySelectorAll(".m-flex-onglets");if(e&&e.length){const s=(e,t)=>{t.querySelectorAll(".js-change-tab").forEach((e,t)=>{e.classList.remove("js-button-active")});t.querySelectorAll(".js-contenu").forEach((e,t)=>{e.classList.remove("js-contenu-active")});var a=t.querySelector(".active");setTimeout(()=>{e.classList.add("js-button-active")},200),a.style.left=e.offsetLeft+"px",a.style.height=e.offsetHeight+"px",a.style.width=e.offsetWidth+"px",t.querySelector("#"+e.dataset.contenu).classList.add("js-contenu-active")};e.forEach((a,e)=>{a.querySelectorAll(".js-change-tab").forEach((t,e)=>{0==e&&(s(t,a),a.querySelector(".active").classList.remove("js-no-animate")),t.addEventListener("click",e=>{e.preventDefault(),t.classList.remove("js-no-animate"),s(t,a)})})})}}(),function(){if(768<window.innerWidth){var a=document.querySelector(".m-navigation");if(!a)return;const c=document.querySelector(".js-hero"),o=document.querySelector(".a-boutton--white"),l=document.querySelector(".a-boutton--extraordinary"),n=document.querySelector(".a-boutton--orange-white"),r=0;window.addEventListener("scroll",()=>{var e,t;e=(e=c).getBoundingClientRect(),t=window.innerHeight,e.bottom<-r||e.top>t+r?(a.classList.add("m-navigation--scrolled"),o.classList.remove("a-boutton--white"),o.classList.add("a-boutton--blue-dark"),l.classList.add("a-boutton--extraordinary-red"),n.classList.remove("a-boutton--orange-white"),n.classList.add("a-boutton--orange")):(a.classList.remove("m-navigation--scrolled"),o.classList.add("a-boutton--white"),o.classList.remove("a-boutton--blue-dark"),l.classList.remove("a-boutton--extraordinary-red"),n.classList.add("a-boutton--orange-white"),n.classList.remove("a-boutton--orange"))})}var e=document.querySelector(".burger-menu"),t=document.querySelector(".burger-menu-two"),s=document.querySelector(".burger-menu-close");e.addEventListener("click",function(){document.querySelector(".menu-container").classList.add("active")}),t.addEventListener("click",function(){document.querySelector(".menu-container").classList.add("active")}),s.addEventListener("click",function(){document.querySelector(".menu-container").classList.toggle("active")})}(),function(){var e=document.querySelectorAll(".m-nouvelle-pop");e&&e.length&&e.forEach((a,e)=>{const s=a.querySelector(".js-close-pop");s.addEventListener("click",e=>{var t=s.dataset.modifiedtime;document.cookie="lastnouvelletime="+t,a.classList.add("js-animate-close"),setTimeout(()=>{a.classList.add("hidden")},600),setTimeout(()=>{a.remove()},600)})})}(),function(){var e=document.querySelectorAll(".o-agenda");e&&e.length&&e.forEach((e,t)=>{const a=e.querySelectorAll(".js-filtre-item"),s=e.querySelector(".js-evenements");a.forEach((t,e)=>{t.addEventListener("click",e=>{e.preventDefault();e=t.dataset.type;a.forEach((e,t)=>{e.classList.remove("active")}),t.classList.add("active"),fetch(wami_js.siteurl+"/api/v1/agenda/type/"+e,{headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>{e.data.tpl&&(s.innerHTML=e.data.tpl)})})})})}(),function(){var e=document.querySelectorAll(".o-children-tabs");e&&e.length&&e.forEach((e,t)=>{const a=e.querySelectorAll(".js-select-tab"),c=e.querySelector(".js-child");a.forEach((s,e)=>{s.addEventListener("click",e=>{e.preventDefault();e=s.dataset.page;a.forEach((e,t)=>{e.classList.remove("active")}),s.classList.add("active"),fetch(wami_js.siteurl+"/api/v1/page/"+e,{headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>{var t=s.href,a=window.location.href.split("/").slice(0,-1).join("/");t.replace(a,"");history.pushState(null,null,t),e.data.tpl&&(c.innerHTML=e.data.tpl)})})})})}(),function(){var e=document.querySelectorAll(".o-customer-journey-stages");e&&e.length&&e.forEach((s,e)=>{const c=s.querySelectorAll(".js-stage-filtre"),o=s.querySelectorAll(".js-stage"),l=s.querySelectorAll(".js-step");c.forEach((a,e)=>{a.addEventListener("click",e=>{e.preventDefault(),c.forEach((e,t)=>{e.classList.remove("active")}),o.forEach((e,t)=>{e.classList.remove("active")}),l.forEach((e,t)=>{e.classList.remove("active")}),a.classList.add("active");var e=a.dataset.steps,t=e.split("-");s.querySelector("#stage-"+t[0]).classList.add("active"),s.querySelector("#step-"+e).classList.add("active")})})})}(),function(){var e=document.querySelectorAll(".o-filtres");if(e&&e.length){const n=(e,t)=>{const a=document.querySelector(".js-post-container");fetch(wami_js.siteurl+"/api/v1/"+t,{method:"POST",body:JSON.stringify({filters:e}),headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>{e.data.tpl&&(a.innerHTML=e.data.tpl)})};e.forEach((a,e)=>{const t=a.querySelectorAll(".js-filtre"),s=a.querySelector(".js-reset-filtres");var c=a.querySelectorAll(".js-filtres-title");const l=a.dataset.type;s.addEventListener("click",e=>{e.preventDefault(),t.forEach((e,t)=>{e.checked=!1}),s.classList.add("g-hidden"),n([],l)}),c.forEach((t,e)=>{t.addEventListener("click",e=>{e.preventDefault();e=t.closest(".js-filtres");e.classList.toggle("open"),e.classList.toggle("close")})}),t.forEach((t,e)=>{t.addEventListener("change",e=>{e.preventDefault();e=t.closest(".js-filtres"),t.checked&&("all"==t.name?e.querySelectorAll(".js-filtre").forEach(e=>{"all"!=e.name&&(e.checked=!1)}):e.querySelector(".js-filtre-all").checked=!1),e=a.querySelectorAll(".js-filtres");let o={};e.forEach((e,t)=>{var a=e.querySelectorAll('input[type="checkbox"]'),s=e.dataset.taxo;o[s]=[];for(var c=0;c<a.length;c++)a[c].checked&&"all"!=a[c].name&&o[s].push(a[c].value)}),s.classList.remove("g-hidden"),n(o,l)})})})}}(),function(){var e=document.querySelectorAll(".o-persona-community");e&&e.length&&new Splide("#o-persona-community_splide",{type:"loop",perPage:2,perMove:1,gap:"1.25rem"}).mount()}(),function(){var e=document.querySelectorAll(".TODO");e&&e.forEach((e,t)=>{var a=document.createElement("div");a.className="TODO--titre",a.innerHTML=e.classList[0],e.prepend(a)}),GLightbox({touchNavigation:!0,autoplayVideos:!0})}();